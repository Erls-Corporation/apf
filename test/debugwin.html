<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script src="../apf.js"></script>
        <link rel="stylesheet" href="http://www.ajax.org/css/style.css" type="text/css" />
        <style>
            body, html, .has_apf{
                background : white;
                overflow : hidden;
            }
        </style>
    </head>
    <body>
        <a:skin src="../skins.xml" media-path="../images/" icon-path="../icons/" />
        
        <a:appsettings debug="0" />
            
        <a:rpc id="comm"
          protocol     = "cgi" 
          baseurl      = "http://www.ajax.org/"
          route-server = "rpcproxy.php"
          autoroute    = "true">
            <a:method name="search" url="data.php">
                <a:param name="search" />
                <a:param name="limit" default="3" />
                <a:param name="page" default="1" />
                <a:param name="index" />
            </a:method>
            <a:method name="fetch" url="data.php">
                <a:param name="f" />
                <a:param name="page" />
                <a:param name="limit" />
            </a:method>
            <a:method name="getComments" url="data.php">
                <a:param name="c" />
            </a:method>
            <a:method name="getDownloads" url="data.php?m=downloads" />
            <a:method name="getNightlies" url="data.php?m=nightlies">
                <a:param name="date" />
            </a:method>
            <a:method name="getBlogs" url="data.php?f=BLOGS" />
            <a:method name="getPlanet" url="data.php?f=AJAXORG" />
            <a:method name="subscribe" url="http://lists.ajax.org/wwsympa.fcgi/subscribe/platform/wwsympa.fcgi"
              receive="app.checkSubscribe">
                <a:param name="list" value="platform" />
                <a:param name="action" value="subrequest" />
                <a:param name="email" />
            </a:method>
            <a:method name="getDemos" url="data.php" receive="loadDemos">
                <a:param name="demo" value="1" />
                <a:param name="name" />
            </a:method>
            <a:method name="loginCheck" url="data.php">
                <a:param name="login" value="check" />
                <a:param name="username" />
            </a:method>
            <a:method name="loginRegister" url="data.php">
                <a:param name="login" value="register" />
                <a:param name="username" />
                <a:param name="password" />
                <a:param name="email" />
            </a:method>
            <!--a:method name="loginUpdate" url="http://development.ajax.org/data.php">
                <a:param name="login" value="update" />
                <a:param name="username" />
            </a:method-->
        </a:rpc>
        
        <a:model id="mdlProps">
           <props>
               <folder>
                    <group caption="General">
                       <prop 
                         caption    = "Title" 
                         editor     = "textbox" 
                         value      = "[@caption]" 
                         required   = "true" />
                       <prop 
                         caption  = "Priority" 
                         editor   = "dropdown" 
                         value    = "[@priority]"
                         >
                            <item value="1">1</item> 
                            <item value="2">2</item> 
                            <item value="3">3</item> 
                            <item value="4">4</item> 
                            <item value="5">5</item> 
                       </prop>
                       <prop 
                         caption   = "(Align)" 
                         editor    = "textbox" 
                         value     = "[@align]">
                            <prop 
                              caption  = "Position" 
                              editor   = "dropdown" 
                              value    = "[@align-template]">
                                <item value="left">left</item> 
                                <item value="top">top</item> 
                                <item value="right">right</item> 
                                <item value="bottom">bottom</item> 
                            </prop>
                            <prop 
                              caption  = "Splitter" 
                              editor   = "checkbox" 
                              values   = "True|False"
                              value    = "[@splitter]" />
                            <prop 
                              caption  = "Edge" 
                              editor   = "slider" 
                              value    = "[@edge]" />
                            <prop 
                              caption  = "Some value" 
                              editor   = "spinner" 
                              value    = "[@some]" />
                       </prop>
                       <prop 
                          caption  = "Date" 
                          editor   = "caldropdown" 
                          value    = "[@date]" />
                    </group>
                    <group caption="Advanced">
                       <prop 
                         caption    = "Title" 
                         editor     = "textbox" 
                         value      = "[@caption]" 
                         required   = "true" />
                       <prop 
                         caption  = "Priority" 
                         editor   = "dropdown" 
                         value    = "[@priority]"
                         >
                            <item value="1">1</item> 
                            <item value="2">2</item> 
                            <item value="3">3</item> 
                            <item value="4">4</item> 
                            <item value="5">5</item> 
                       </prop>
                       <prop 
                         caption   = "(Align)" 
                         editor    = "textbox" 
                         value     = "[@align]">
                            <prop 
                              caption  = "Position" 
                              editor   = "dropdown" 
                              value    = "[@align-template]">
                                <item value="left">left</item> 
                                <item value="top">top</item> 
                                <item value="right">right</item> 
                                <item value="bottom">bottom</item> 
                            </prop>
                            <prop 
                              caption  = "Splitter" 
                              editor   = "checkbox" 
                              values   = "True|False"
                              value    = "[@splitter]" />
                            <prop 
                              caption  = "Edge" 
                              editor   = "slider" 
                              value    = "[@edge]" />
                            <prop 
                              caption  = "Some value" 
                              editor   = "spinner" 
                              value    = "[@some]" />
                       </prop>
                       <prop 
                          caption  = "Date" 
                          editor   = "caldropdown" 
                          value    = "[@date]" />
                    </group>
               </folder>
               <file>
                   <prop 
                     caption    = "Title" 
                     type       = "textbox" 
                     select     = "@caption" 
                     required   = "true" />
                   <prop 
                     caption  = "Priority" 
                     type     = "dropdown" 
                     select   = "@priority"
                     overview = "overview" 
                     >
                        <item value="1">1</item> 
                        <item value="2">2</item> 
                        <item value="3">3</item> 
                        <item value="4">4</item> 
                        <item value="5">5</item> 
                   </prop>
               </file>
           </props>
       </a:model>
       
        <a:model id="mdlData">
            <folder caption="My Documents" priority="4" align="left-splitter-3" />
        </a:model>
    
        <a:menu id="mnuOptions">
            <a:check>Show time</a:check>
            <a:check>Use browser debugger</a:check>
            <a:divider />
            <a:item>Copy log</a:item>
        </a:menu>
    
        <!-- removing this first bar bugs the layout engine -->
        <a:bar align="left" skin="basic">
            
        </a:bar>
        <a:bar height="300" align="bottom-splitter" skin="basic" style="border-top:1px solid #c3c3c3;overflow:hidden;">
            <a:tab anchors="2 -1 0 0" skin="demos_lowtab" activepage2="docs">
                <a:page caption="Console" >
                    <a:text id="console" align="left" scrolldown="true" behavior="addonly" contextmenu="mnuOptions" focussable="true" style="border-right:1px solid #c3c3c3" />
                    <a:toolbar align="left-splitter" height="27" style="border-width:1px 1px 0 0;border-style:solid;border-color:#c3c3c3;">
                        <a:bar>
                            <a:button onclick="apf.console.clear();console.clear()" icon="arrow_redo.png" tooltip="Clear"></a:button>
                            <a:divider />
                            <!--a:button onclick="console.clear();console.setValue(apf.console.getAll())" 
                                state="true" value="true">All</a:button>
                            <a:divider /-->
                            <a:button id="btnLog" onclick="apf.$debugwin.updateLog()" 
                                state="true">Logs</a:button>
                            <a:button id="btnWarn" onclick="apf.$debugwin.updateLog()"  
                                state="true" value="true">Warnings</a:button>
                            <a:button id="btnError" onclick="apf.$debugwin.updateLog()" 
                                state="true" value="true">Errors</a:button>
                            <a:divider />
                            <a:button submenu="mnuOptions">Options</a:button>
                        </a:bar>
                    </a:toolbar>
                    <a:textarea align="right" width="30%"/>
                    <a:toolbar align="right" height="26" style="border-width:0 0 0 1px;border-style:solid;border-color:#c3c3c3;">
                        <a:bar>
                            <a:button tooltip="Run the code (Ctrl-Enter)">Execute as {stLM.checked ? 'Live Markup' : 'JavaScript'}</a:button>
                            <a:radiobutton style="float:right" id="stLM" skin="toolbarradio" icon="movie.png" group="codetype" state="true">Live Markup</a:radiobutton>
                            <a:radiobutton style="float:right" skin="toolbarradio" icon="image.png" group="codetype" state="true" checked="true">Javascript</a:radiobutton>
                            <!--a:textbox visible="{stLM.checked}" left="170" top="3" right="10"/-->
                        </a:bar>
                    </a:toolbar>
                </a:page>
                <a:page caption="Browse" render2="runtime">
                    <a:toolbar>
                        <a:bar>
                            <a:button state="true" value="true" onclick="pgBrowse.set(0)">AML</a:button>
                            <a:button state="true" onclick="pgBrowse.set(1)">Data</a:button>
                            <a:button state="true" onclick="pgBrowse.set(2)">Objects</a:button>
                        </a:bar>
                    </a:toolbar>
                    <a:pages anchors="25 0 0 0" id="pgBrowse">
                        <a:page caption="AML">
                            <a:markupedit id="dbgMarkup" skin="debugmarkup" render-root="true" each="node()[local-name(.)]" align="left-splitter" />
                            <a:propedit id="pe" columns="35%,65%" model="mdlData" 
                                properties="[mdlProps::folder]" width="30%" align="right" />
                        </a:page>
                        <a:page caption="Data">
                            <a:markupedit id="dbgMarkup2" skin="debugmarkup" render-root="true" each="node()[local-name(.)]" anchors="0 0 0 0" />
                        </a:page>
                        <a:page caption="Objects">
                            
                        </a:page>
                    </a:pages>
                </a:page>
                <a:page caption="Net">
                </a:page>
                <a:page caption="Storage">
                </a:page>
                <!--a:page caption="Profiler">
                </a:page-->
                <a:page caption="Docs" id="docs" render="runtime">
                    <!-- this needs to be implemented using an include from ajax.org and a fallback locally -->
                    <a:include src="docs.xml" />
                </a:page>
            </a:tab>
        </a:bar>
        
        <a:script>//<!--
            apf.$debugwin = {
                init : function(){
                    this.updateLog();
                    apf.addEventListener("debug", this.debugHandler);
                },
                
                updateLog : function(){
                    console.clear();
                    console.setValue(apf.console.getAll(
                        btnError.value,
                        btnWarn.value,
                        btnLog.value
                    ))
                },
                
                debugHandler : function(e){
                    if ((self["btn" + e.type.uCaseFirst()] || btnLog).value)
                        console.setValue(e.message);
                }
            }
            
            apf.$debugwin.init();
        //--></a:script>
    </body>
</html>