<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Debugger</title>
        <script>var loader2 = true</script>        
        <script src="../apf.js"></script>
    </head>
    <body>
    	<embed type="application/o3stem-aaaaaaaa-1111-bbbb-1111-cccccccccccc" width="0" height="0" />
    
        <a:skin src="../skins.xml" media-path="../images/" icon-path="editor/debugger_icons/" />

        <a:appsettings debug="0" />

        <a:debugger id="dbg"
          state-running     = "stRunning"
          state-attached    = "stAttached"
          model-sources     = "mdlDbgSources"
       	  model-stacks      = "mdDbglStack"
       	  model-breakpoints = "mdlDbgBreakpoints" 
       	  onbreak           = ""
       	  oncontinue        = "" />
        
        <!--
            Be sure to set .xmlRoot to the data of mdlTabs
        -->
        <a:debughost id="dbgChrome"
          port     = "9222" 
          server   = "localhost" 
          type     = "chrome"
          autoinit = "false"
          model-tabs      = "mdlTabs"
          state-connected = "stConnected" />

        <a:debughost id="dbgNode"
          port     = "5858" 
          server   = "localhost" 
          type     = "v8"
          autoinit = "false"
          model-tabs      = "mdlTabs"
          state-connected = "stConnected" />

         <!-- tab       = "{ide.getProjectUrl()}" 
          active    = "auto"-->
         
        <a:debughost id="dbgPhp"
          port     = "9222" 
          server   = "test.ajax.org" 
          type     = "php"
          autoinit = "false" />

		<a:toolbar align="top" height="26">
			<a:bar>
	        	<a:button
	        	  icon="standalone_v8_16.png"
	        	  onclick="dbg.attach(dbgNode)"
	        	  disabled="{stConnected.active}" />
	        	<a:button
	        	  icon="chromium_16"
	        	  onclick="winTab.show(); dbgChrome.loadTabs()"
	        	  disabled="{stConnected.active}" />
	        	<a:divider />
                <a:button
                  icon="{this.disabled ? 'resume_co_disabled.gif' : 'resume_co.gif'}"
                  onclick="dbg.continueScript();"
                  disabled="{stRunning.active or !stConnected.active}" />
	        	<a:button
	              icon="{this.disabled ? 'suspend_co_disabled.gif' : 'suspend_co.gif'}"
	              disabled="true"/>
	        	<!-- a:button
	        	  icon="{this.disabled ? 'terminate_co_disabled.gif' : 'terminate_co.gif'}"
	        	  onclick="dbg.detach();"
	        	  disabled="{!stAttached.active}" /-->
	        	<a:button
	        	  icon="{this.disabled ? 'disconnect_co_disabled.gif' : 'disconnect_co.gif'}"
	        	  onclick="dbgChrome.disconnect();dbgNode.disconnect();"
	        	  disabled="{!stConnected.active}" />
				<a:divider />
	        	<a:button
	        	  icon="{this.disabled ? 'stepinto_co_disabled.gif' : 'stepinto_co.gif'}" 
	        	  onclick="dbg.stepInto();" 
	        	  disabled="{stRunning.active}" />
	        	<a:button
	        	  icon="{this.disabled ? 'stepover_co_disabled.gif' : 'stepover_co.gif'}"
	        	  onclick="dbg.stepNext();"
	        	  disabled="{stRunning.active}" />
	        	<a:button
	        	  icon="{this.disabled ? 'stepreturn_co_disabled.gif' : 'stepreturn_co.gif'}" 
	        	  onclick="dbg.stepOut();"
	        	  disabled="{stRunning.active}" />
	        </a:bar>
        </a:toolbar>
        
        <a:window id="winTab" 
          title="Choose a Tab"
          zindex="10" 
          center="true" 
          modal="true" 
          width="450" 
          height="200" 
          visible="false">
        	<a:list id="lstTabs" 
        	  model="mdlTabs" 
        	  anchors="10 10 40 10" 
        	  multiselect="false" 
        	  autoselect="false" 
        	  each="[tab]" 
        	  caption="[@url]" 
        	  empty-message="Loading tabs..."
        	  onafterchoose = "btnOk.dispatchEvent('click');"/>
        	<a:button id="btnOk"
        	  right="10" 
        	  bottom="10" 
        	  width="60" 
        	  disabled="{!lstTabs.selected}" 
        	  default="true"
        	  onclick="winTab.close();dbg.attach(dbgChrome, {lstTabs.selected})">
        	    OK
       		</a:button>
        </a:window>        
        
        <a:window
          skin="dockwin" 
          dock="true"
          align="left-splitter" 
          width="400" 
          visible="true" 
          title="Sources" 
          zindex="9">
	        <a:list id="lstScripts"
	          model="mdlDbgSources"
	          anchors="0 0 0 0"
	          each="[file]"
	          caption="[@text]"
	          icon="file_obj.gif">
	        	<a:actions />
	        </a:list>
        </a:window>
        
        <a:codeeditor id="ce" 
          align       = "right"
          model       = "{lstScripts.selected}"
          debugger    = "{dbg}"
          syntax      = "js" 
          readonly    = "true"        
          showinvisibles    = "false"
          showprintmargin   = "true"
          printmargincolumn = "80">
            <a:load get="{adbg.loadScript(dbg, {lstScripts.selected})}"/>
            <a:value value="[text()]" />
        </a:codeeditor>
        
    </body>
</html>