<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script src="../../apf.js"></script>
        
        <style type="text/css" media="screen">
            html{
                overflow: hidden;
            }
        </style>
    </head>
    <body>
    	<embed type="application/o3stem-aaaaaaaa-1111-bbbb-1111-cccccccccccc" width="0" height="0" /> 
    	
        <a:skin src="../../skins.xml" media-path="../../images/" icon-path="debugger_icons/" />       
        <a:appsettings debug="0" />
       
       	<a:model id="mdlTabs" />
       	<a:model id="mdlScripts" src="{attachDebugger([{lstTabs.selected}::@id])}" autoinit="false" />
       	<a:model id="mdlDebugger">
       		<debugger running="true" connected="false">
       			<breakpoints />
       			<scripts />
       		</debugger>
    	</a:model>


        <a:window id="winTab" title="Choose a Tab" center="true" modal="true" width="450" height="200" visible="true">
        	<a:list 
        		model="mdlTabs" 
        		anchors="10 10 40 10" 
        		id="lstTabs" 
        		multiselect="false" 
        		eachvalue="[text()]" 
        		autoselect="false" 
        		each="[tab]" 
        		caption="[text()]" 
        		empty-message="Loading tabs..."
        		onafterchoose = "btnOk.dispatchEvent('click');"/>
        	<a:button id="btnOk"
        		right="10" 
        		bottom="10" 
        		width="60" 
        		disabled="{!lstTabs.selected}" 
        		default="true"
        		onclick="winTab.close();mdlScripts.init();">OK
       		</a:button>
        </a:window>
        
		<a:toolbar align="top" height="26">
			<a:bar>
	        	<a:textbox id="tbFilter" initial-message="Filter" realtime="true" />
	        	<a:button id="btnContinue" icon="{this.disabled ? 'resume_co_disabled.gif' : 'resume_co.gif'}" onclick="continueScript();" disabled="[mdlDebugger::@running]" />
	        	<a:button icon="{this.disabled ? 'suspend_co_disabled.gif' : 'suspend_co.gif'}" disabled="true" />
	        	<a:button icon="{this.disabled ? 'disconnect_co_disabled.gif' : 'disconnect_co.gif'}" onclick="disconnect();" disabled="{![mdlDebugger::@connected]}" />
	        	<a:button icon="{this.disabled ? 'stepinto_co_disabled.gif' : 'stepinto_co.gif'}" onclick="stepInto();" disabled="[mdlDebugger::@running]" />
	        	<a:button icon="{this.disabled ? 'stepover_co_disabled.gif' : 'stepover_co.gif'}" onclick="stepNext();" disabled="[mdlDebugger::@running]" />
	        	<a:button icon="{this.disabled ? 'stepreturn_co_disabled.gif' : 'stepreturn_co.gif'}" onclick="stepOut();" disabled="[mdlDebugger::@running]" />
	        </a:bar>
        </a:toolbar>
        
        <a:list
          id="lstScripts"
          model="mdlScripts"
          width="300"
          align="left-splitter"
          each="[script]"
          filter="{tbFilter.value}"
          caption="[@text]"
          icon="file_obj.gif">
        	<a:actions />
        </a:list>
        
        <a:codeeditor id="ce" 
            align       = "right-splitter"
            model       = "{lstScripts.selected}"  
            syntax      = "js" 
            readonly    = "true"        
            showinvisibles = "true"
            showprintmargin = "true"
            printmargincolumn = "80"
            ongutterdblclick = "toggleBreakPoint([{lstScripts.selected}::@id], event.row)">
            <a:load get="{adbg.loadScript([@id])}"/>
            <a:value value="[text()]" />
        </a:codeeditor>   
          
          
        <a:window skin="dockwin" dock="true" align="right-splitter" height="200" visible="true" title="Stacktrace">
        </a:window>
          
        <a:script src="debugger.js"></a:script>
    </body>
</html>